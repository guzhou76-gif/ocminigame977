<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>OC 小故事 · 网页小游戏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* —— 基础样式 —— */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }
    .game-wrapper {
      width: 100%;
      max-width: 600px;
      padding: 16px;
    }
    .card {
      background: rgba(15,23,42,0.92);
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
      border: 1px solid rgba(148,163,184,0.4);
      backdrop-filter: blur(10px);
    }

    /* —— 顶部信息 —— */
    .title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .subtitle {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 12px;
    }

    /* —— 立绘区域（可以以后换成背景图 / 角色图） —— */
    .scene-visual {
      height: 150px;
      border-radius: 12px;
      margin-bottom: 12px;
      background: radial-gradient(circle at 20% 0%, #22d3ee 0, transparent 50%),
                  radial-gradient(circle at 80% 100%, #a855f7 0, transparent 55%),
                  #020617;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px;
      color: #e5e7eb;
      text-align: center;
      font-size: 13px;
    }

    /* —— 文本区域 —— */
    .speaker {
      font-size: 13px;
      color: #a5b4fc;
      margin-bottom: 4px;
    }
    .content {
      font-size: 14px;
      line-height: 1.6;
      white-space: pre-wrap;
      margin-bottom: 12px;
    }

    /* —— 选项按钮 —— */
    .choices {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 8px;
    }
    .choice-btn {
      width: 100%;
      border-radius: 999px;
      padding: 8px 14px;
      border: 1px solid rgba(129,140,248,0.7);
      background: rgba(15,23,42,0.8);
      color: #e5e7eb;
      font-size: 14px;
      text-align: left;
      cursor: pointer;
      transition: background 0.15s, transform 0.08s, box-shadow 0.15s;
    }
    .choice-btn:hover {
      background: rgba(79,70,229,0.8);
      box-shadow: 0 4px 14px rgba(79,70,229,0.5);
      transform: translateY(-1px);
    }
    .choice-btn:active {
      transform: translateY(0);
      box-shadow: none;
    }

    /* —— 底部状态栏 —— */
    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: #9ca3af;
      border-top: 1px dashed rgba(75,85,99,0.8);
      padding-top: 6px;
      margin-top: 4px;
    }
    .pill {
      border-radius: 999px;
      padding: 2px 8px;
      border: 1px solid rgba(148,163,184,0.7);
      font-size: 11px;
    }
    .pill-cta {
      border-color: rgba(129,140,248,0.9);
      color: #c7d2fe;
      cursor: pointer;
    }
  </style>
</head>
<body>
<div class="game-wrapper">
  <div class="card">
    <div class="title">「某某 OC」的小故事</div>
    <div class="subtitle" id="subtitle">一个可以点击选项推进的网页小游戏 Demo</div>

    <div class="scene-visual" id="sceneVisual">
      这里将来可以放：场景说明 / OC 立绘 / 一句氛围文案
    </div>

    <div class="speaker" id="speaker"></div>
    <div class="content" id="content"></div>

    <div class="choices" id="choices"></div>

    <div class="status-bar">
      <div id="statusText">当前节点：start</div>
      <div class="pill pill-cta" id="restartBtn">重新开始</div>
    </div>
  </div>
</div>

<script>
  /*
   * —— 整个游戏的“剧本”都写在这个 storyNodes 里 ——
   * 每一个 key 就是一幕（一个节点）
   * 每一幕包含：
   *  - speaker：说话人（可以是 OC 名字，也可以留空）
   *  - text：这一幕的正文
   *  - visual：上方区域显示的文字（可以写场景、BGM 描述之类）
   *  - choices：选项数组 -> { text: 选项文字, next: 跳到哪个节点 }
   * 如果没有 choices，说明这是一个结局节点。
   */

  const storyNodes = {
    start: {
      speaker: "旁白",
      visual: "黄昏的天色压在旧城区的屋檐上，你第一次在这里等到 TA。",
      text: "今天是你和 OC 第一次正式见面的日子。\n\n你提前了十分钟到达约定的路口，却发现他已经站在那儿，手里拎着一袋不知道什么东西。",
      choices: [
        { text: "打招呼：『你来得好早。』", next: "greeting_early" },
        { text: "先观察一下他手里的袋子。", next: "observe_bag" }
      ]
    },

    greeting_early: {
      speaker: "你",
      visual: "路灯刚刚亮起，光线在他眼里折出一点若有若无的亮。",
      text: "“你来得好早。”\n\n你这样说出口的时候，其实心里有点高兴——\n总觉得，愿意早到的人，好像也在某种程度上把这件事看得很重要。",
      choices: [
        { text: "认真问他在等多久了。", next: "ask_wait_time" },
        { text: "转移话题，问他袋子里是什么。", next: "observe_bag" }
      ]
    },

    observe_bag: {
      speaker: "你",
      visual: "那是一只有点旧的帆布袋，像是陪他跑了很多年路。",
      text: "你没直接搭话，而是先盯着他手里的袋子看。\n\n“这个？”他注意到你的视线，把袋子往上提了一下，“是给你的。”",
      choices: [
        { text: "接过来看一看。", next: "open_bag" },
        { text: "有点受宠若惊，不敢收。", next: "refuse_bag" }
      ]
    },

    ask_wait_time: {
      speaker: "OC",
      visual: "他偏了偏头，像是在计算，又像是在逃避精确的数字。",
      text: "“也没多久。”他回答得很轻松，“不过来早一点也没关系。”\n\n你忽然意识到，在他的世界里，‘等你’这件事，似乎并不算什么麻烦。",
      choices: [
        { text: "你决定顺势把话题引到今天的计划。", next: "plan_today" },
        { text: "你突然有点害羞，选择先看袋子里是什么。", next: "open_bag" }
      ]
    },

    open_bag: {
      speaker: "旁白",
      visual: "塑料包装轻轻摩擦发出细碎的声音。",
      text: "你接过袋子。里面整整齐齐地躺着——\n\n一盒你最喜欢的点心。\n\n“之前你随口提过一次。”他像是在解释，又像是在辩解，“刚好路过那家店，就顺手买了。”",
      choices: [
        { text: "你很认真地向他道谢。", next: "good_end" },
        { text: "你打趣他说：『你记性不错嘛。』", next: "tease" }
      ]
    },

    refuse_bag: {
      speaker: "你",
      visual: "风从街口灌过来，把话吹得有点轻。",
      text: "“这太破费了吧……”你下意识地想退回去。\n\n然而他只是把袋子又往你怀里一塞：“那就当作是见面礼。”\n\n你忽然意识到——\n也许，在他的故事里，你是一个值得被郑重对待的角色。",
      choices: [
        { text: "你终于还是收下了。", next: "good_end" },
        { text: "你嘴上继续推脱，但心里已经偷偷很高兴。", next: "tease" }
      ]
    },

    plan_today: {
      speaker: "你",
      visual: "街道尽头是一家小小的咖啡馆，玻璃上写着今天的推荐菜单。",
      text: "“那我们今天要先去哪里？”你问。\n\n他想了想，报出了两个选项——\n一家你一直很想去却没机会去的旧书店，\n或者，那家刚刚开张的、传说中甜品非常好吃的店。",
      choices: [
        { text: "去旧书店，那是你更熟悉的世界。", next: "bookstore" },
        { text: "去甜品店，今天就当是纪念日。", next: "dessert_shop" }
      ]
    },

    tease: {
      speaker: "你",
      visual: "你意识到自己在笑，而他也看着你笑。",
      text: "“你记性不错嘛。”\n\n你试图用玩笑稀释那一点突如其来的心动。\n\n“还行吧。”他耸耸肩，“只记跟你有关的事。”",
      choices: [
        { text: "……你觉得今天大概会被他击败很多次。", next: "good_end" }
      ]
    },

    bookstore: {
      speaker: "旁白",
      visual: "纸张与墨水的味道在门口就能闻到。",
      text: "你们最后选择了旧书店。\n\n在一排排书架之间，你第一次和他并肩而立，\n讨论着那些纸页上已经结束、而你们的故事还刚刚开始的情节。",
      choices: [
        { text: "【结局】也许这一天会被你记很久。", next: "end_bookstore" }
      ]
    },

    dessert_shop: {
      speaker: "旁白",
      visual: "展示柜里的蛋糕像是一整个玻璃盒的柔软梦境。",
      text: "你们推门走进甜品店。\n\n他看着菜单，忽然提起：\n“下次你心情不好的时候，也可以自己来这里。就当是……我的秘密应援据点。”",
      choices: [
        { text: "【结局】你突然很想知道，会有多少个『下次』。", next: "end_dessert" }
      ]
    },

    good_end: {
      speaker: "系统",
      visual: "【GOOD END】",
      text: "这大概是一个非常普通、又非常难得的好结局。\n\n你们没有说什么惊天动地的话，\n只是一起，把一个傍晚走完。",
      choices: [
        { text: "退回到最开始，再玩一遍。", next: "start" }
      ]
    },

    end_bookstore: {
      speaker: "系统",
      visual: "【END：书页之间的余白】",
      text: "有些人是在同一页相遇的，\n而有些人，是从不同的章节走过来，只为了在同一行字里肩并肩。\n\n——至少，在这条时间线上，你们翻到了同一页。",
      choices: [
        { text: "回到开头", next: "start" }
      ]
    },

    end_dessert: {
      speaker: "系统",
      visual: "【END：甜品店门口的约定】",
      text: "你忽然觉得，自己也许并不是故事里的路人甲。\n\n你有资格被谁惦记，被谁专门记住一个口味，被谁提前十分种抵达。",
      choices: [
        { text: "回到开头", next: "start" }
      ]
    }
  };

  // —— 简单的引擎部分：负责根据当前节点刷新界面 ——
  const speakerEl   = document.getElementById("speaker");
  const contentEl   = document.getElementById("content");
  const choicesEl   = document.getElementById("choices");
  const sceneVisual = document.getElementById("sceneVisual");
  const statusText  = document.getElementById("statusText");
  const restartBtn  = document.getElementById("restartBtn");
  const subtitleEl  = document.getElementById("subtitle");

  let currentNodeId = "start";

  function renderNode(nodeId) {
    const node = storyNodes[nodeId];
    if (!node) {
      speakerEl.textContent = "";
      contentEl.textContent = "（这里好像还没写剧情……检查一下 storyNodes 里是否有这个节点：" + nodeId + "）";
      choicesEl.innerHTML = "";
      statusText.textContent = "当前节点：" + nodeId + "（不存在）";
      return;
    }

    currentNodeId = nodeId;
    speakerEl.textContent = node.speaker ? node.speaker : "";
    contentEl.textContent = node.text || "";
    sceneVisual.textContent = node.visual || "";
    statusText.textContent = "当前节点：" + nodeId;

    // 更新选项按钮
    choicesEl.innerHTML = "";
    if (node.choices && node.choices.length > 0) {
      node.choices.forEach(choice => {
        const btn = document.createElement("button");
        btn.className = "choice-btn";
        btn.textContent = choice.text;
        btn.addEventListener("click", () => {
          renderNode(choice.next);
        });
        choicesEl.appendChild(btn);
      });
    } else {
      const endText = document.createElement("div");
      endText.style.fontSize = "12px";
      endText.style.color = "#9ca3af";
      endText.textContent = "（这个节点没有选项，算作一个终点。）";
      choicesEl.appendChild(endText);
    }
  }

  restartBtn.addEventListener("click", () => {
    renderNode("start");
  });

  // 可以在这里改成你 OC 的名字或一句简介
  subtitleEl.textContent = "你正在体验：某某 OC 的个人线小故事 Demo";

  // 初始化
  renderNode("start");
</script>
</body>
</html>
